{namespace fed = Tx_Fed_ViewHelpers}
<fieldset>
	<legend>Schedule</legend>
	<div class="control-group">
		<label class="control-label" for="start">
			<f:translate key="tx_lecoop_domain_model_schedule.start" />*
		</label>
		<div class="controls">
			<f:form.textfield class="datepicker" property="scheduleid.start"  value="{course.scheduleid.start->f:format.date(format: 'm/d/y H:i')}" />
			<p></p>
		</div>
		<label class="control-label" for="end">
			<f:translate key="tx_lecoop_domain_model_schedule.end" />*
		</label>
		<div class="controls">
			<f:form.textfield class="datepicker" property="scheduleid.end"  value="{course.scheduleid.end->f:format.date(format: 'm/d/y H:i')}" />
			<p></p>
		</div>
	</div>
	<legend>Events</legend>
	
	<table class="table table-striped table-bordered table-condensed">
	  <thead>
	    <tr>
	      <th>#</th>
	      <th>First Event</th>
	      <th>Last Event</th>
	      <th>Length</th>
	      <th>Repitition</th>
	      <th>Functions</th>
	    </tr>
	  </thead>
	  <tbody>
	  	<f:for each="{course.scheduleid.events}" as="event" iteration="it">
		    <tr>
		      <td><fed:math expression="{it.index} + 1" /></td>
		      <td><f:form.textfield class="datetimepicker span2" property="scheduleid.events.{it.index}.start" value="{event.start->f:format.date(format: 'm/d/y H:i')}" /></td>
		      <td><f:form.textfield class="datetimepicker span2" property="scheduleid.events.{it.index}.end" value="{event.end->f:format.date(format: 'm/d/y H:i')}" /></td>
		      <td><f:form.textfield class="timepicker span1" property="scheduleid.events.{it.index}.length" value="{event.length->f:format.date(format: 'H:i')}" /></td>
		      <td>
			      <f:form.select class="span3" property="scheduleid.events.{it.index}.steplength" options="{0: 'None', 1: 'Every Day', 2: 'Every 2 Days', 7: 'Weekly', 14: 'Every two weeks'}" value="{event.steplength}" />
		      </td>
		      <td>…</td>
		    </tr>
	  	</f:for>
	  	
	    <tr>
	      <td>-</td>
	      <td><f:form.textfield class="datetimepicker span2" property="scheduleid.events.{f:count(subject: '{course.scheduleid.events}')}.start" value="" /></td>
	      <td><f:form.textfield class="datetimepicker span2" property="scheduleid.events.{f:count(subject: '{course.scheduleid.events}')}.end" value="" /></td>
	      <td><f:form.textfield class="timepicker span1" property="scheduleid.events.{f:count(subject: '{course.scheduleid.events}')}.length" value="" /></td>
	      <td>
		      <f:form.select class="span3" property="scheduleid.events.{f:count(subject: '{course.scheduleid.events}')}.steplength" options="{0: 'None', 1: 'Every Day', 2: 'Every 2 Days', 7: 'Weekly', 14: 'Every two weeks'}" />
	      </td>
	      <td>…</td>
	    </tr>
	  </tbody>
	</table>
</fieldset>